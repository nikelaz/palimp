import { LineEdit, VerticalBox, StandardButton } from "std-widgets.slint";

export component AddCrawlDialog inherits Dialog {
    callback start(string, string); // site_id (passed from Rust), concurrency
    callback cancel-clicked();
    title: "Start New Crawl";
    
    min-width: 400px;
    min-height: 150px;

    property <string> concurrency-text;

    VerticalBox {
        spacing: 15px;

        VerticalBox {
            spacing: 5px;
            Text { text: "Concurrency:"; }
            concurrency_input := LineEdit {
                placeholder-text: "Default: 5";
                text: "5";
                height: 35px;
                edited => { root.concurrency-text = self.text; }
            }
        }
    }

    StandardButton {
        kind: ok;
        clicked => {
            root.start("", concurrency_input.text);  // First param handled in Rust
            concurrency_input.text = "5";
        }
    }

    StandardButton {
        kind: cancel;
        clicked => {
            root.cancel-clicked();
        }
    }
}
